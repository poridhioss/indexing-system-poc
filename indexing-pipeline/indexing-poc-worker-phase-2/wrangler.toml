name = "indexing-poc-phase-2"
main = "src/index.ts"
compatibility_date = "2024-11-24"
compatibility_flags = ["nodejs_compat"]

# Your Cloudflare account ID (find in dashboard URL or run: wrangler whoami)
account_id = "afeeea28ef4b58aad33f54322feaab68"

# Version metadata for Sentry release tracking
[version_metadata]
binding = "CF_VERSION_METADATA"

[vars]
# Static JWT token for POC (will be replaced with proper auth later)
DEV_TOKEN = "dev-token-12345"
# Sentry DSN for error tracking and performance monitoring
SENTRY_DSN = "https://dbb33cebf2ee614a93489261bfea5a7a@o4510746637697024.ingest.us.sentry.io/4510752458145792"

# Workers AI binding (FREE - 10K neurons/day)
[ai]
binding = "AI"

# KV namespace for storing merkle roots and embedding cache
# For local dev, wrangler creates a local KV automatically
# For production, create with: wrangler kv:namespace create INDEX_KV
[[kv_namespaces]]
binding = "INDEX_KV"
id = "c682d9b69609426584b8bb43e8efad26"
preview_id = "d078af5985044b5182091a4d18fa7d48"

# Vectorize for embeddings storage (FREE - 5M vectors)
# Create with: wrangler vectorize create vectorize-poc --dimensions 1024 --metric cosine
[[vectorize]]
binding = "VECTORIZE"
index_name = "vectorize-poc"
